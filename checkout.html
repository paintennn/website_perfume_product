<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán</title>

    <!-- custom css link -->
    <link href="./publics/css/dangNhap_dangKy.css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/header.css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/menu.css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/main .css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/footer.css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/slideShow.css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/style.css" rel="stylesheet" type="text/css" />
    <link href="./publics/css/giohang.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./publics/css/check_out.css">
    <!-- google font link -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
</head>

<body>
    <!-- Header -->
    <header class="header" data-header>
        <div class="top-nav group">
            <section>
                <div class="social-top-nav">
                    <a href=""> <i class="fa-brands fa-facebook"></i></a>
                    <a href=""><i class="fa-brands fa-twitter"></i> </a>
                    <a href=""><i class="fa-brands fa-google"></i></a>
                    <a href=""><i class="fa-brands fa-youtube"></i> </a>
                </div>
                <!-- End Social Topnav -->
                <!-- <div class="Top_dau" id="account-user">
                </div> -->
                <div id="id01" class="login account-center">
                    <form class="login-content animate">
                        <div class="imgcontainer">
                            <span onClick="document.getElementById('id01').style.display='none'" class="close" title="Close Login">&times;</span>
                        </div>
                        <div class="container">
                            <label><b>Tên đăng nhập</b></label>
                            <input type="text" id="user2" placeholder="Nhập tên đăng nhập" required>

                            <label><b>Mật khẩu</b></label>
                            <input type="password" id="pass2" placeholder="Nhập mật khẩu" required>
                            <button type="submit" onClick="checkLogin()">Đăng nhập</button>
                        </div>
                    </form>
                </div>
                <div id="id02" class="signup account-center">
                    <form class="signup-content animate">
                        <div class="imgcontainer">
                            <h1>Đăng ký tài khoản</h1>
                            <span onClick="document.getElementById('id02').style.display='none'" class="close" title="Close Signup">&times;</span>
                        </div>
                        <div class="container">
                            <label><b>Tên đăng nhập</b></label>
                            <input type="text" id="user1" placeholder="Nhập tên đăng nhập" required>

                            <label><b>Email</b></label>
                            <input type="text" id="email" placeholder="...@gmail.com" required>

                            <label><b>Mật khẩu</b></label>
                            <input type="password" id="pass1" placeholder="Nhập mật khẩu" required>

                            <label><b>Nhập lại mật khẩu</b></label>
                            <input type="password" id="repass" placeholder="Nhập lại mật khẩu" required>
                            <div class="clearfix">
                                <button type="submit" class="signupbtn" onClick="checkSignUp()">Đăng ký</button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </div>
        <div class="nav-wrapper" id="myHeader">
            <div class="container">
                <!-- hiển thị logo -->
                <a class="logo" href="index.html">
                    <img src="./publics/image/logo/logo2(500x500).png" height="80px" width="122px" />
                </a>
                <!-- hiển thị menu 3 gạch khi thu nhỏ màn hình -->
                <button class="nav-open-btn" aria-label="Open Menu" data-nav-open-btn>
            <i class="fa-solid fa-bars"></i>
          </button>
                <!-- sổ menu nếu kích thước nhỏ -->
                <nav class="navbar" data-navbar>
                    <button class="nav-close-btn" aria-label="Close Menu" data-nav-close-btn>
              <ion-icon name="close-outline"
                ><i class="fa-solid fa-xmark"></i
              ></ion-icon>
            </button>
                    <ul class="navbar-list">
                        <li>
                            <a href="./index.html" class="navbar-link">TRANG CHỦ</a>
                        </li>

                        <li>
                            <a href="" class="navbar-link">GIỚI THIỆU</a>
                        </li>

                        <li class="Menu">
                            <a href="" class="navbar-link">NƯỚC HOA <i class="fa-solid fa-chevron-down"></i
                ></a>
                            <ul class="dropdown-content">
                                <li><a href="#nuoc_hoa_nam" class="navbar-link">Nước hoa nam</a></li>
                                <li><a href="#nuoc_hoa_nu" class="navbar-link">Nước hoa nữ</a></li>
                                <li><a href="#nuoc_hoa_unisex" class="navbar-link">Nước hoa Unisex</a></li>
                                <li><a href="#" class="navbar-link">Khác</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="" class="navbar-link">LIÊN HỆ</a>
                        </li>
                        <li>
                            <a href="./order.html" class="navbar-link">ĐƠN HÀNG</a>
                        </li>

                    </ul>
                </nav>

                <div class="header-action">
                    <!-- xử lý icon tìm kiếm -->
                    <div class="search-wrapper" data-search-wrapper>
                        <button class="header-action-btn" aria-label="Toggle search" data-search-btn>
                <ion-icon class="search-icon"
                  ><i class="fa-solid fa-magnifying-glass"></i
                ></ion-icon>
                <ion-icon class="close-icon"
                  ><i class="fa-solid fa-xmark"></i
                ></ion-icon>
              </button>
                        <div class="input-wrapper">
                            <input type="search" name="search" placeholder="Tìm kiếm" class="search-input" />
                            <button class="search-submit" type="button">
                                <ion-icon class="search-outline" name="search-outline">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </ion-icon>
                            </button>
                        </div>
                    </div>
                    <!-- icon giỏ hàng -->
                    <button class="header-action-btn" aria-label="Open shopping cart" data-panel-btn="cart">
              <ion-icon name="basket-outline"
                ><i class="fa-solid fa-basket-shopping"></i
              ></ion-icon>
              <!-- <data class="btn-badge" value="2">02</data> -->
            </button>
                </div>
            </div>
        </div>
    </header>
    <!-- End header -->
    <!-- xem trước giỏ hàng ở đây nhé! -->
    <aside class="aside">
        <div class="side-panel" data-side-panel="cart">
            <button class="panel-close-btn" aria-label="Close cart" data-panel-btn="cart">
          <ion-icon name="close-outline"
            ><i class="fa-solid fa-xmark"></i
          ></ion-icon>
        </button>
            <ul class="panel-list">
                <li class="panel-item">
                    <a href="./product-details.html" class="panel-card">
                        <figure class="item-banner">
                            <img src="./images/sanPham/[id 1]Nuoc Hoa Nu Dolce Gabbana The Only One For Women EDP 50ml  (1).jpg" width="46" height="46" loading="lazy" alt="Nuoc Hoa Nu Dolce Gabbana The Only One For Women EDP 50ml" />
                        </figure>

                        <div>
                            <p class="item-title">
                                Nước Hoa Nữ Dolce Gabbana The Only One For Women EDP 50ml
                            </p>

                            <p class="item-value1">2.000.000đ</p>
                            <span class="item-value2">1.800.000đ x 1</span>
                        </div>

                        <button class="item-close-btn" aria-label="Remove item">
                <ion-icon name="close-outline"
                  ><i class="fa-solid fa-xmark"></i
                ></ion-icon>
              </button>
                    </a>
                </li>

                <li class="panel-item">
                    <a href="./product-details.html" class="panel-card">
                        <figure class="item-banner">
                            <img src="./images/sanPham/[id 20]Nuoc Hoa Nu Dolce & Gabbana The Only One 2 EDP 100ml (1).jpg" width="46" height="46" loading="lazy" alt="Nuoc Hoa Nu Dolce & Gabbana The Only One 2 EDP 100ml" />
                        </figure>

                        <div>
                            <p class="item-title">
                                Nước Hoa Nữ Dolce & Gabbana The Only One 2 EDP 100ml
                            </p>
                            <p class="item-value1">4.950.000đ</p>
                            <span class="item-value2">3.550.000đ x 1</span>
                        </div>

                        <button class="item-close-btn" aria-label="Remove item">
                <ion-icon name="close-outline"
                  ><i class="fa-solid fa-xmark"></i
                ></ion-icon>
              </button>
                    </a>
                </li>
            </ul>

            <div class="subtotal">
                <p class="subtotal-text">Tổng tiền:</p>

                <data class="subtotal-value" value="5.350.000đ">5.350.000đ</data>
            </div>

            <a href="./cart.html" class="panel-btn">Xem giỏ hàng</a>
        </div>
    </aside>
    <!-- Main -->
    <main>
        <div class="checkout container">
            <div class="form">
                <h3>Thông tin nhận hàng</h3>
                <div class="form_checkout">
                    <p>Họ tên người nhận:</p>
                    <input type="text" class="name" placeholder="Họ tên người nhận">
                    <p>Số điện thoại người nhận:</p>
                    <input type="text" class="phone_number" placeholder="Số điện thoại">
                    <p>Địa chỉ người nhận:</p>
                    <input type="text" class="address" placeholder="Địa chỉ">
                    <p>Lưu ý cho đơn hàng:</p>
                    <textarea class="note"> </textarea>
                    <br>
                    <a href=""><button class="btn_checkout">Thanh toán đơn hàng</button></a>
                </div>
            </div>

            <div class="product">
                <h3>Sản phẩm</h3>
                <div class="data_cart">
                    <div class="data"></div>
                    <div class="total">
                        <b>Thành tiền:</b>
                        <b class="money"></b>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- End main -->
    <footer class="footer">
        <div class="footer-top">
            <a class="logo" href="./index.html">
                <img src="./publics/image/logo/logo2(500x500)footer.png" height="100px" width="144px" />
            </a>
            <div class="container">
                <div class="footer-brand">
                    <p class="footer-text-title">DM.perfume.com Vietnam</p>
                    <p class="footer-text">
                        ĐC:273 An D. Vương, Phường 3, Quận 5, Thành phố Hồ Chí Minh
                    </p>
                    <p class="footer-text">SĐT:0767914077</p>
                    <br />
                    <p class="footer-text">
                        Tổng đài hỗ trợ (08:00-21:00, miễn phí gọi)
                    </p>
                    <p class="footer-text">Gọi mua: 1800545457 (phím 1)</p>
                    <p class="footer-text">Khiếu nại: 1800545457 (phím 2)</p>
                </div>

                <ul class="footer-list">
                    <li>
                        <p class="footer-list-title">DANH MỤC</p>
                    </li>

                    <li>
                        <a href="./index.html" class="footer-link">TRANG CHỦ</a>
                    </li>

                    <li>
                        <a href="./index.html" class="footer-link">GIỚI THIỆU</a>
                    </li>

                    <li>
                        <a href="./index.html" class="footer-link">NƯỚC HOA</a>
                    </li>

                    <li>
                        <a href="./index.html" class="footer-link">LIÊN HỆ</a>
                    </li>
                </ul>

                <ul class="footer-list">
                    <li>
                        <p class="footer-list-title">DỊCH VỤ KHÁCH HÀNG</p>
                    </li>

                    <li class="footer-item">
                        <a href="#"> Chính sách bảo hành thu đổi</a>
                    </li>
                    <li class="footer-item">
                        <a href="#"> Chính sách giao hàng</a>
                    </li>
                    <br />
                    <li>
                        <p class="footer-list-title">PHƯƠNG THỨC THANH TOÁN</p>
                    </li>
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <img width="50px" src="../publics/image/footer/visa.png" />
                        </li>
                        <li class="list-inline-item">
                            <img width="50px" src="./publics/image/footer/dollar.png" />
                        </li>
                        <li class="list-inline-item">
                            <img width="50px" src="./publics/image/footer/credit-card.png" />
                        </li>
                    </ul>
                </ul>

                <div class="footer-list">
                    <p class="footer-list-title">KẾT NỐI VỚI CHÚNG TÔI</p>
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <a href="https://www.facebook.com/profile.php?id=100071453021961">
                                <img width="40px" src="./publics/image/footer/facebook.png" />
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="https://www.instagram.com/">
                                <img width="40px" src="./publics/image/footer/instagram.png" />
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="https://twitter.com/home?lang=vi">
                                <img width="40px" src="./publics/image/footer/twitter.png" />
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="https://www.youtube.com/">
                                <img width="40px" src="./publics/image/footer/youtube.png" />
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="container">
                <p class="copyright">
                    &copy; 2022 Copyright:
                    <a href="./index.html" class="copyright-link">DM.perfume.com Vietnam</a
            >
          </p>
        </div>
      </div>
    </footer>
    <!-- End footer -->

    <!-- Script -->
        <script src="./publics/js/script.js"></script>
        <script src="./publics/js/slideShow.js"></script>
        <script src="./publics/image/icon/fontawesome/js/all.min.js"></script>
        <script src="./save_data_local.js"></script>



        <script>
            // Get id in url
            var urlParams = new URLSearchParams(window.location.search);
            let id = urlParams.get("id"); 
            const user = JSON.parse(localStorage.getItem("user_login"))



            if(id){
                // Get data form Localstorage
                const data = JSON.parse(localStorage.getItem("products"))

                // Get user

                const data_product = data.filter(item => item.id == id)
                

                document.querySelector(".data").innerHTML =   `
                        <div class="item_product">
                            <div class="img_product">
                                <img src="./publics/image/products/${data_product[0].img1}" width="100%" alt="">
                            </div>
                            <div class="price_product">
                                ${data_product[0].price} vnd
                            </div>
                        </div>
                        <hr>
                        <div class="total">
                        <b>Thành tiền:</b>
                        <b>${data_product[0].price} vnd</b>
                        </div>
                `

                

                } else {
                    const cart_local = localStorage.getItem("cart") ? JSON.parse(localStorage.getItem("cart")) : []

                    document.querySelector(".data").innerHTML = cart_local.map(item => `
                        <div class="item_product">
                            <div class="img_product">
                                <img src="./publics/image/products/${item.img}" width="100%" alt="">
                            </div>
                            <div class="price_product">
                                ${item.price} đ
                            </div>
                        </div>
                        <hr>
                `
                
                ).join("")


                const data_order_local = localStorage.getItem("order") ? JSON.parse(localStorage.getItem("order")) : []

                document.querySelector(".btn_checkout").addEventListener("click", () => {
                    const data_order = {
                        email: user.email ,
                        name: document.querySelector(".name").value,
                        phone_number: document.querySelector(".phone_number").value,
                        address: document.querySelector(".address").value,
                        note: document.querySelector(".note").value,
                        products: [...cart_local]
                    }

                    // Save data
                    if(data_order_local){
                        const new_data_order = [...data_order_local, data_order];
                        localStorage.setItem("order", JSON.stringify(new_data_order))
                        localStorage.removeItem("cart");
                    } else if(!data_order_local) {
                        localStorage.setItem("order", JSON.stringify(data_order))
                        localStorage.removeItem("cart");
                    }

                })

                let total = 0

                cart_local.map(item_cart => {
                    total += (item_cart.price * Number(item_cart.count))
                });
                document.querySelector(".money").innerHTML = `${total} đ`;
                }

        </script>
    <!-- End script -->
</body>

</html>